@model SesionEntrenadaDTO
@{
    ViewData["Title"] = "Sesión Entrenada";
}

<div class="container mt-4">
    <div class="bg-dark p-4 rounded border mb-4">
        <h2 class="text-white">Rutina: @Model.NombreRutina</h2>
        <p class="text-light mb-1"><strong>Fecha realizada:</strong> @Model.FechaRealizada.ToString("dd/MM/yyyy")</p>
        <p class="text-light"><strong>Duración:</strong> @(Model.DuracionMin ?? 0) minutos</p>
    </div>

    @foreach (var ejercicio in Model.Ejercicios)
    {
        <div class="card mb-4">
            <div class="card-header d-flex align-items-center">
                <img src="@Url.Content(ejercicio.ImagenURL)" alt="Imagen" class="me-3" style="width: 100px; height: 100px; object-fit: cover; border-radius: 8px;" />
                <div>
                    <h5 class="mb-1">@ejercicio.Nombre</h5>
                    <p class="mb-0 text-muted">@ejercicio.Tipo | Grupo muscular: @ejercicio.GrupoMuscular</p>
                </div>
            </div>
            <div class="card-body">

                @if (!ejercicio.SeRealizo || (!ejercicio.Series.Any() && !ejercicio.Mediciones.Any()))
                {
                    <div>
                        <h5 class="alert-heading">Ejercicio no realizado</h5>
                        <p>
                            Este ejercicio no cuenta con series ni mediciones registradas en la sesión.
                        </p>
                    </div>
                }
                else
                {
                    <h6>Series realizadas</h6>
                    <table class="table table-dark table-bordered">
                        <thead>
                            <tr>
                                <th>Repeticiones</th>
                                <th>Peso utilizado (kg)</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var serie in ejercicio.Series)
                            {
                                <tr>
                                    <td>@serie.Repeticiones</td>
                                    <td>@(serie.PesoUtilizado ?? 0)</td>
                                </tr>
                            }
                        </tbody>
                    </table>

                    @if (ejercicio.Mediciones.Any())
                    {
                        <h6 class="mt-3">Mediciones</h6>
                        <table class="table table-dark table-bordered">
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th>Unidad</th>
                                    <th>Valor</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var med in ejercicio.Mediciones)
                                {
                                    <tr>
                                        <td>@med.Nombre</td>
                                        <td>@med.Unidad</td>
                                        <td>@med.Valor</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    }
                    else
                    {
                        <p class="text-muted fst-italic">Sin mediciones registradas.</p>
                    }
                }
            </div>
        </div>
    }
</div>
