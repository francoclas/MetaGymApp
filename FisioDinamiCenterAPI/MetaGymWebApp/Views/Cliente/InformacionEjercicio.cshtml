@using LogicaNegocio.Extra
@model EjercicioDTO
@{
    ViewData["Title"] = "Información del Ejercicio";
}
<link rel="stylesheet" href="~/css/cliente/infoEjercicio.css" />
<script src="~/js/cliente/infoEjercicio.js"></script>
<div class="container">
    <h2>@Model.Nombre</h2>
    <p class="autor">(Creado por Profesional ID: @Model.ProfesionalId)</p>
    <p class="info">@Model.Tipo | Grupo muscular: @Model.GrupoMuscular</p>

    <hr />
    <h3>Instrucciones</h3>
    @if (!string.IsNullOrWhiteSpace(Model.Instrucciones))
    {
            <div class="instrucciones">
            @Model.Instrucciones
            </div>
    }
    else
    {
            <p class="no-instrucciones">Este ejercicio no cuenta con instrucciones, pero podés mirar los videos a continuación.</p>
    }

    <hr />
    <h3>Videos</h3>
    @if (Model.Medias.Any(m => m.Tipo == Enum_TipoMedia.Video))
    {
            <div class="contenedor-videos">
            @foreach (var media in Model.Medias.Where(m => m.Tipo == Enum_TipoMedia.Video))
            {
                        <video controls src="@media.Url" class="video"></video>
            }
            </div>
    }
    else
    {
            <p class="no-videos">No hay videos disponibles para este ejercicio.</p>
    }

    <hr />
    <h3>Imágenes</h3>
    @if (Model.Medias.Any(m => m.Tipo == Enum_TipoMedia.Imagen))
    {
            <div class="slideshow-container" id="slideshow">
            @foreach (var media in Model.Medias.Where(m => m.Tipo == Enum_TipoMedia.Imagen))
            {
                        <div class="slide">
                            <img src="@media.Url" alt="Imagen del ejercicio" class="slide-img" />
                        </div>
            }
            </div>
    }
    else
    {
            <p class="no-imagenes">No hay imágenes disponibles para este ejercicio.</p>
    }
    <hr />
    <h3>Mediciones requeridas</h3>
    @if (Model.Mediciones != null && Model.Mediciones.Any())
    {
        <div class="row row-cols-1 row-cols-md-2 g-4 mt-2">
            @foreach (var med in Model.Mediciones)
            {
                <div class="col">
                    <div class="card bg-dark text-light border-light h-100">
                        <div class="card-body">
                            <h5 class="card-title">@med.Nombre (@med.Unidad)</h5>
                            <p class="card-text">@med.Descripcion</p>
                            @if (med.EsObligatoria)
                            {
                                <span class="badge bg-danger">Obligatoria</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">Opcional</span>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <p class="no-mediciones">No hay mediciones definidas para este ejercicio.</p>
    }
</div>