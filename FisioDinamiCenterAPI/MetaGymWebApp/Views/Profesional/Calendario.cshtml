@using LogicaNegocio.Clases
@model List<Cita>
@{
    ViewData["Title"] = "Calendario Profesional";
}

<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
<script src="/js/calendarioLogica.js"></script>

<div class="d-flex" style="height: calc(100vh - 60px);">
    <div class="flex-grow-1 p-2">
        <div id="calendario"></div>
        <div class="mt-3 p-2 border border-dark rounded bg-dark text-light">
            <h6>Referencias</h6>
            <div class="d-flex flex-wrap gap-3">
                <span><span class="badge bg-danger">&nbsp;&nbsp;</span> En espera</span>
                <span><span class="badge bg-success">&nbsp;&nbsp;</span> Finalizada</span>
                <span><span class="badge bg-primary">&nbsp;&nbsp;</span> Aceptada</span>
                <span><span class="badge bg-secondary">&nbsp;&nbsp;</span> Cancelada / Rechazada</span>
            </div>
        </div>
    </div>
    <div id="panel-derecho" class="text-white p-3" style="width: 350px; overflow-y:auto;">
    </div>
</div>
<script>
    inicializarCalendario(
        '/Profesional/ObtenerCitas?profesionalId=@Model.FirstOrDefault()?.ProfesionalId',
        [
    @foreach (var agenda in Model.FirstOrDefault()?.Profesional.Agendas ?? new List<AgendaProfesional>())
    {
        <text>{
                        daysOfWeek: [@((int)agenda.Dia)],
                        startTime: "@agenda.HoraInicio.ToString(@"hh\:mm")",
                        endTime: "@agenda.HoraFin.ToString(@"hh\:mm")"
                    },</text>
    }
        ]
    );
</script>

<script src="~/js/profesional/editarCitaParcial.js"></script>
