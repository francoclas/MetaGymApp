@using LogicaApp.DTOS
@using LogicaNegocio.Extra
@model CitaDTO

<div class="container mt-4 bg-dark border rounded py-4 text-white">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>Editar Cita</h4>
        <button type="button" class="btn btn-sm btn-outline-light" onclick="cerrarPanelDerecho()">✖</button>
    </div>

    <!-- Información general de la cita -->
    <div class="mb-4 p-3 border rounded bg-secondary">
        <h5 class="mb-3">📌 Información de la cita</h5>
        <p><strong>Cliente:</strong> @Model.Cliente?.NombreCompleto</p>
        <p><strong>Teléfono:</strong> @Model.Cliente?.Telefono</p>
        <p><strong>Correo:</strong> @Model.Cliente?.Correo</p>
        <hr class="border-light" />
        <p><strong>Especialidad:</strong> @Model.Especialidad?.NombreEspecialidad</p>
        <p><strong>Establecimiento:</strong> @Model.Establecimiento?.Direccion</p>
    </div>

    <!-- Formulario de edición -->
    <form asp-action="EditarCitaCalendario" method="post">
        <input type="hidden" asp-for="CitaId" />
        <input type="hidden" asp-for="EstablecimientoId" />
        <input type="hidden" asp-for="ClienteId" />

        <div class="mb-3">
            <label class="form-label">📅 Fecha y hora:</label>
            <input asp-for="FechaAsistencia" type="datetime-local" class="form-control" />
            <span asp-validation-for="FechaAsistencia" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label class="form-label">📝 Descripción:</label>
            <textarea asp-for="Descripcion" class="form-control" rows="3"></textarea>
            <span asp-validation-for="Descripcion" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label class="form-label">⚕️ Tipo de atención:</label>
            <select asp-for="TipoAtencionId" class="form-select" asp-items="ViewBag.TiposAtencion"></select>
            <span asp-validation-for="TipoAtencionId" class="text-danger"></span>
        </div>

        <hr />

        <div class="form-group mb-3">
            <label for="Estado">📌 Estado de la cita:</label>
            <select asp-for="Estado" class="form-control">
                <option value="@EstadoCita.Aceptada">Aceptada</option>
                <option value="@EstadoCita.Finalizada">Finalizada</option>
                <option value="@EstadoCita.Cancelada">Cancelada</option>
                <option value="@EstadoCita.NoAsistio">No Asistió</option>
                <option value="@EstadoCita.Rechazada">Rechazada</option>
            </select>
        </div>

        <div class="form-group mb-3">
            <label for="Conclusion">🧾 Conclusión:</label>
            <textarea asp-for="Conclusion" class="form-control" rows="3"></textarea>
            <span asp-validation-for="Conclusion" class="text-danger"></span>
        </div>

        <div class="d-flex justify-content-between">
            <button type="submit" class="btn btn-primary">💾 Guardar Cambios</button>
        </div>
    </form>
</div>
