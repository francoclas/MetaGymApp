@model MisPublicacionesProfesional
@{
    ViewData["Title"] = "Mis Publicaciones";
}

<h2 class="text-white">Mis Publicaciones</h2>

<div class="mb-3">
    <a asp-action="SolicitarPublicacion" class="btn btn-success">➕ Nueva publicación</a>
</div>

@if (!Model.Pendientes.Any() && !Model.Aprobadas.Any() && !Model.Rechazadas.Any())
{
    <div class="bg-dark p-4 rounded border text-center">
        <h5 class="text-muted">Todavía no realizaste ninguna publicación.</h5>
        <p>Podés comenzar creando una desde el botón <strong>➕ Nueva publicación</strong>.</p>
    </div>
}
else
{
    <ul class="nav nav-tabs mb-3" id="tabFiltro">
        <li class="nav-item">
            <a class="nav-link active" data-tab="pendientes" href="#">Pendientes</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="aprobadas" href="#">Aprobadas</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="rechazadas" href="#">Rechazadas</a>
        </li>
    </ul>

    <!-- Pendientes -->
    <div id="tabla-pendientes" class="tab-publicaciones">
        @if (!Model.Pendientes.Any())
        {
            <div class="alert alert-info mt-3">No tenés publicaciones pendientes.</div>
        }
        else
        {
            <table class="table table-dark table-bordered tabla-publicaciones" id="tablaPendientes">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Título</th>
                        <th>Fecha Creación</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var pub in Model.Pendientes)
                    {
                        <tr>
                            <td>@pub.Id</td>
                            <td>@pub.Titulo</td>
                            <td>@pub.FechaCreacion.ToString("dd/MM/yyyy")</td>
                            <td>
                                <a class="btn btn-sm btn-outline-light" asp-action="DetallePublicacion" asp-route-id="@pub.Id">Ver detalles</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>

    <!-- Aprobadas -->
    <div id="tabla-aprobadas" class="tab-publicaciones d-none">
        @if (!Model.Aprobadas.Any())
        {
            <div class="alert alert-info mt-3">No tenés publicaciones aprobadas todavía.</div>
        }
        else
        {
            <table class="table table-dark table-bordered tabla-publicaciones" id="tablaAprobadas">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Título</th>
                        <th>Fecha Creación</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var pub in Model.Aprobadas)
                    {
                        <tr>
                            <td>@pub.Id</td>
                            <td>@pub.Titulo</td>
                            <td>@pub.FechaCreacion.ToString("dd/MM/yyyy")</td>
                            <td>
                                <a class="btn btn-sm btn-outline-light" asp-action="DetallePublicacion" asp-controller="Profesional" asp-route-id="@pub.Id">Ver detalles</a>
                                <a class="btn btn-sm btn-outline-warning" asp-action="EditarPublicacion" asp-controller="Profesional" asp-route-id="@pub.Id">Editar</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>

    <!-- Rechazadas -->
    <div id="tabla-rechazadas" class="tab-publicaciones d-none">
        @if (!Model.Rechazadas.Any())
        {
            <div class="alert alert-info mt-3">No tenés publicaciones rechazadas.</div>
        }
        else
        {
            <table class="table table-dark table-bordered tabla-publicaciones" id="tablaRechazadas">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Título</th>
                        <th>Fecha Creación</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var pub in Model.Rechazadas)
                    {
                        <tr>
                            <td>@pub.Id</td>
                            <td>@pub.Titulo</td>
                            <td>@pub.FechaCreacion.ToString("dd/MM/yyyy")</td>
                            <td>
                                <a class="btn btn-sm btn-outline-light" asp-action="DetallePublicacion" asp-controller="Profesional" asp-route-id="@pub.Id">Ver detalles</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>
}

    <script src="~/js/profesional/misPublicacionesProfesional.js"></script>
